@using RR.Blazor.Components.Core
@using RR.Blazor.Components.Form
@using RR.Blazor.Components.Feedback
@using RR.Blazor.Enums

<RCard Variant="CardVariant.Outlined" Text="RCheckbox">
    <ChildContent>
        <RDivider Text="Checkbox Component" 
                         Subtitle="Professional checkbox for form selections with enterprise styling and validation" 
                         Icon="check_box" />
        
        <div class="space-y-6">
            <!-- Basic Examples -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Basic Examples</div>
                <div class="space-y-3">
                    <RCheckbox @bind-Checked="@_basicChecked" Text="Basic checkbox" />
                    <RCheckbox @bind-Checked="@_withIcon" Text="With icon" Icon="star" />
                    <RCheckbox @bind-Checked="@_withDescription" 
                               Text="With description" 
                               Description="Additional context information" />
                    <RCheckbox @bind-Checked="@_required" Text="Required field *" Required="true" />
                    <RCheckbox @bind-Checked="@_disabled" Text="Disabled checkbox" Disabled="true" />
                </div>
            </div>

            <!-- Variants -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Variants</div>
                <div class="space-y-3">
                    <RCheckbox @bind-Checked="@_defaultVariant" Text="Default variant" />
                    <RCheckbox @bind-Checked="@_primary" Text="Primary variant" Variant="CheckboxVariant.Primary" />
                    <RCheckbox @bind-Checked="@_success" Text="Success variant" Variant="CheckboxVariant.Success" />
                    <RCheckbox @bind-Checked="@_warning" Text="Warning variant" Variant="CheckboxVariant.Warning" />
                    <RCheckbox @bind-Checked="@_error" Text="Error variant" Variant="CheckboxVariant.Error" />
                </div>
            </div>

            <!-- Sizes -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Sizes</div>
                <div class="space-y-3">
                    <RCheckbox @bind-Checked="@_small" Text="Small size" Size="SizeType.Small" />
                    <RCheckbox @bind-Checked="@_medium" Text="Medium size" Size="SizeType.Medium" />
                    <RCheckbox @bind-Checked="@_large" Text="Large size" Size="SizeType.Large" />
                </div>
            </div>

            <!-- Professional Use Cases -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Professional Use Cases</div>
                <div class="space-y-4">
                    <div>
                        <p class="text-sm text-muted mb-2">Terms & Agreements</p>
                        <div class="space-y-2">
                            <RCheckbox @bind-Checked="@_terms" 
                                       Text="I agree to the Terms of Service" 
                                       Icon="gavel" 
                                       Required="true" />
                            <RCheckbox @bind-Checked="@_privacy" 
                                       Text="I accept the Privacy Policy" 
                                       Icon="privacy_tip" 
                                       Required="true" />
                        </div>
                    </div>

                    <div>
                        <p class="text-sm text-muted mb-2">User Preferences</p>
                        <div class="space-y-2">
                            <RCheckbox @bind-Checked="@_newsletter" 
                                       Text="Subscribe to newsletter" 
                                       Description="Receive monthly updates and promotions"
                                       Icon="mail" />
                            <RCheckbox @bind-Checked="@_notifications" 
                                       Text="Enable push notifications" 
                                       Description="Get notified about important events"
                                       Icon="notifications" />
                            <RCheckbox @bind-Checked="@_twoFactor" 
                                       Text="Enable two-factor authentication" 
                                       Description="Add extra security to your account"
                                       Icon="security" />
                        </div>
                    </div>

                    <div>
                        <p class="text-sm text-muted mb-2">Permissions & Settings</p>
                        <div class="space-y-2">
                            <RCheckbox @bind-Checked="@_readPermission" 
                                       Text="Read access" 
                                       Icon="visibility" 
                                       Variant="CheckboxVariant.Success" />
                            <RCheckbox @bind-Checked="@_writePermission" 
                                       Text="Write access" 
                                       Icon="edit" 
                                       Variant="CheckboxVariant.Warning" />
                            <RCheckbox @bind-Checked="@_deletePermission" 
                                       Text="Delete access" 
                                       Icon="delete" 
                                       Variant="CheckboxVariant.Error" />
                        </div>
                    </div>
                </div>
            </div>

            <!-- Interactive Demo -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Interactive Demo</div>
                <div class="space-y-3">
                    <RCheckbox @bind-Checked="@_demoValue" 
                               Text="@GetDemoText()" 
                               Icon="@(_demoValue ? "check_circle" : "radio_button_unchecked")"
                               Variant="@(_demoValue ? CheckboxVariant.Success : CheckboxVariant.Primary)"
                               @onchange="HandleDemoChange" />
                    
                    @if (_showDemoResult)
                    {
                        <div class="pa-3 rounded bg-success-light text-success">
                            <i class="icon mr-2">check_circle</i>
                            Checkbox state changed to: @(_demoValue ? "Checked" : "Unchecked")
                        </div>
                    }
                </div>
            </div>

            <!-- Form Integration Example -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Form Integration</div>
                <div class="pa-4 border border-light rounded">
                    <div class="text-sm font-semibold mb-3">Account Settings</div>
                    <div class="space-y-3">
                        <RCheckbox @bind-Checked="@_accountSettings.EmailNotifications" 
                                   Text="Email notifications" 
                                   Description="Receive important account updates"
                                   Icon="email" />
                        <RCheckbox @bind-Checked="@_accountSettings.MarketingEmails" 
                                   Text="Marketing emails" 
                                   Description="Receive promotional content"
                                   Icon="campaign" />
                        <RCheckbox @bind-Checked="@_accountSettings.PublicProfile" 
                                   Text="Public profile" 
                                   Description="Make your profile visible to others"
                                   Icon="public" />
                        <RCheckbox @bind-Checked="@_accountSettings.DataSharing" 
                                   Text="Data sharing" 
                                   Description="Share anonymized usage data"
                                   Icon="share" />
                    </div>
                </div>
            </div>
        </div>
    </ChildContent>
</RCard>

@code {
    // Basic states
    private bool _basicChecked = false;
    private bool _withIcon = true;
    private bool _withDescription = false;
    private bool _required = false;
    private bool _disabled = true;

    // Variants
    private bool _defaultVariant = false;
    private bool _primary = true;
    private bool _success = false;
    private bool _warning = false;
    private bool _error = false;

    // Sizes
    private bool _small = true;
    private bool _medium = false;
    private bool _large = true;

    // Professional use cases
    private bool _terms = false;
    private bool _privacy = false;
    private bool _newsletter = true;
    private bool _notifications = false;
    private bool _twoFactor = true;
    private bool _readPermission = true;
    private bool _writePermission = false;
    private bool _deletePermission = false;

    // Interactive demo
    private bool _demoValue = false;
    private bool _showDemoResult = false;

    // Form integration
    private AccountSettingsModel _accountSettings = new();

    private string GetDemoText()
    {
        return _demoValue ? "Currently checked - click to uncheck" : "Currently unchecked - click to check";
    }

    private async Task HandleDemoChange()
    {
        _showDemoResult = true;
        StateHasChanged();
        
        await Task.Delay(2000);
        
        _showDemoResult = false;
        StateHasChanged();
    }

    public class AccountSettingsModel
    {
        public bool EmailNotifications { get; set; } = true;
        public bool MarketingEmails { get; set; } = false;
        public bool PublicProfile { get; set; } = false;
        public bool DataSharing { get; set; } = false;
    }
}