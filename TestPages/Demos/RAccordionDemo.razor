@using RR.Blazor.Components
@using RR.Blazor.Components.Display
@using RR.Blazor.Components.Core
@using RR.Blazor.Components.Feedback
@using RR.Blazor.Enums
@using RR.Blazor.TestPages.Demos.Components

<div class="relative">
    <GitHubLinkButton FileName="RAccordionDemo.razor" />
    <RCard Variant="CardVariant.Outlined" Text="RAccordion">
    <ChildContent>
        <RDivider Text="Accordion Component"
                  Subtitle="Collapsible content sections with smooth animations"
                  Icon="expand_more" />

        <RTabs Density="DensityType.Dense">
            <!-- Basic Accordion Demo Tab -->
            <RTabItem Title="Basic" Icon="view_agenda">
                <div class="space-y-6">
                    <!-- Default Accordion -->
                    <div class="space-y-2">
                        <div class="text-h6 font-medium">Default Accordion (Single Expand)</div>
                        <p class="text-sm text-muted mb-3">Only one item can be expanded at a time</p>
                        <RAccordion>
                            <RAccordionItem Text="What is RR.Blazor?" Icon="info">
                                RR.Blazor is a comprehensive design system and component library for Blazor applications.
                                It provides a complete set of reusable UI components with a consistent design language.
                            </RAccordionItem>
                            <RAccordionItem Text="Installation Guide" Icon="download">
                                Install RR.Blazor via NuGet package manager:
                                <code class="block mt-2 pa-2 bg-surface-elevated rounded">dotnet add package RR.Blazor</code>
                            </RAccordionItem>
                            <RAccordionItem Text="Getting Started" Icon="rocket_launch">
                                Add the RThemeProvider to your main layout and start using R* components.
                                All components follow Material Design principles with extensive customization options.
                            </RAccordionItem>
                            <RAccordionItem Text="Documentation" Icon="menu_book">
                                Complete documentation is available in the TestPages folder.
                                Each component includes interactive demos and usage examples.
                            </RAccordionItem>
                        </RAccordion>
                    </div>

                    <!-- Multiple Expand -->
                    <div class="space-y-2">
                        <div class="text-h6 font-medium">Multiple Expand</div>
                        <p class="text-sm text-muted mb-3">Multiple items can be expanded simultaneously</p>
                        <RAccordion Multiple="true">
                            <RAccordionItem Text="Core Components" Icon="widgets">
                                Buttons, Cards, Chips, Avatars, and more essential UI building blocks.
                            </RAccordionItem>
                            <RAccordionItem Text="Form Components" Icon="edit_note">
                                Text inputs, checkboxes, radio buttons, date pickers, and form validation.
                            </RAccordionItem>
                            <RAccordionItem Text="Data Components" Icon="table_chart">
                                Data grids, tables, charts, and data visualization components.
                            </RAccordionItem>
                            <RAccordionItem Text="Feedback Components" Icon="notifications">
                                Alerts, toasts, progress bars, and skeleton loading states.
                            </RAccordionItem>
                        </RAccordion>
                    </div>

                    <!-- Icon Position -->
                    <div class="space-y-2">
                        <div class="text-h6 font-medium">Icon Positions</div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <div class="text-sm font-medium mb-2">Left Icon Position:</div>
                                <RAccordion IconPosition="AccordionIconPosition.Left">
                                    <RAccordionItem Text="Left Icon Item 1" Icon="star">
                                        Expand/collapse icon appears on the left side
                                    </RAccordionItem>
                                    <RAccordionItem Text="Left Icon Item 2" Icon="favorite">
                                        This provides a different visual hierarchy
                                    </RAccordionItem>
                                </RAccordion>
                            </div>
                            <div>
                                <div class="text-sm font-medium mb-2">Right Icon Position (Default):</div>
                                <RAccordion IconPosition="AccordionIconPosition.Right">
                                    <RAccordionItem Text="Right Icon Item 1" Icon="settings">
                                        Expand/collapse icon appears on the right side
                                    </RAccordionItem>
                                    <RAccordionItem Text="Right Icon Item 2" Icon="tune">
                                        This is the standard Material Design pattern
                                    </RAccordionItem>
                                </RAccordion>
                            </div>
                        </div>
                    </div>
                </div>
            </RTabItem>

            <!-- Variants Tab -->
            <RTabItem Title="Variants" Icon="style">
                <div class="space-y-6">
                    <!-- Default Variant -->
                    <div class="space-y-2">
                        <div class="text-h6 font-medium">Default Variant</div>
                        <p class="text-sm text-muted mb-3">Standard accordion with borders</p>
                        <RAccordion Variant="AccordionVariant.Default">
                            <RAccordionItem Text="Default Item 1">
                                Standard accordion item with default styling
                            </RAccordionItem>
                            <RAccordionItem Text="Default Item 2">
                                Clean and professional appearance
                            </RAccordionItem>
                        </RAccordion>
                    </div>

                    <!-- Flush Variant -->
                    <div class="space-y-2">
                        <div class="text-h6 font-medium">Flush Variant</div>
                        <p class="text-sm text-muted mb-3">Borderless accordion for seamless integration</p>
                        <RAccordion Variant="AccordionVariant.Flush" Bordered="false">
                            <RAccordionItem Text="Flush Item 1" Icon="check">
                                No borders or background for minimal design
                            </RAccordionItem>
                            <RAccordionItem Text="Flush Item 2" Icon="done_all">
                                Perfect for content-focused layouts
                            </RAccordionItem>
                        </RAccordion>
                    </div>

                    <!-- Filled Variant -->
                    <div class="space-y-2">
                        <div class="text-h6 font-medium">Filled Variant</div>
                        <p class="text-sm text-muted mb-3">Filled background when expanded</p>
                        <RAccordion Variant="AccordionVariant.Filled">
                            <RAccordionItem Text="Filled Item 1" Icon="format_paint">
                                Background fills when item is expanded
                            </RAccordionItem>
                            <RAccordionItem Text="Filled Item 2" Icon="palette">
                                Provides visual feedback for active state
                            </RAccordionItem>
                        </RAccordion>
                    </div>

                    <!-- Separated Items -->
                    <div class="space-y-2">
                        <div class="text-h6 font-medium">Separated Items</div>
                        <p class="text-sm text-muted mb-3">Individual cards with spacing between items</p>
                        <RAccordion Separated="true">
                            <RAccordionItem Text="Separated Item 1" Icon="view_agenda">
                                Each item appears as a separate card
                            </RAccordionItem>
                            <RAccordionItem Text="Separated Item 2" Icon="view_stream">
                                Visual separation between accordion items
                            </RAccordionItem>
                            <RAccordionItem Text="Separated Item 3" Icon="view_list">
                                Great for complex content sections
                            </RAccordionItem>
                        </RAccordion>
                    </div>
                </div>
            </RTabItem>

            <!-- States Tab -->
            <RTabItem Title="States" Icon="toggle_on">
                <div class="space-y-6">
                    <!-- Initially Expanded -->
                    <div class="space-y-2">
                        <div class="text-h6 font-medium">Initially Expanded</div>
                        <p class="text-sm text-muted mb-3">Items can start in expanded state</p>
                        <RAccordion>
                            <RAccordionItem Text="Expanded by Default" Expanded="true" Icon="expand_circle_down">
                                This item starts in the expanded state, perfect for showing important content immediately.
                            </RAccordionItem>
                            <RAccordionItem Text="Collapsed by Default" Icon="chevron_right">
                                This item starts collapsed like normal
                            </RAccordionItem>
                        </RAccordion>
                    </div>

                    <!-- Disabled Items -->
                    <div class="space-y-2">
                        <div class="text-h6 font-medium">Disabled Items</div>
                        <p class="text-sm text-muted mb-3">Items can be disabled to prevent interaction</p>
                        <RAccordion>
                            <RAccordionItem Text="Active Item" Icon="check_circle">
                                This item can be clicked and expanded normally
                            </RAccordionItem>
                            <RAccordionItem Text="Disabled Item" Icon="block" Disabled="true">
                                This content is not accessible due to disabled state
                            </RAccordionItem>
                            <RAccordionItem Text="Another Active Item" Icon="verified">
                                This item works normally
                            </RAccordionItem>
                        </RAccordion>
                    </div>

                    <!-- Interactive State Demo -->
                    <div class="space-y-2">
                        <div class="text-h6 font-medium">Interactive State Management</div>
                        <p class="text-sm text-muted mb-3">Items with event callbacks for tracking state changes</p>
                        <div class="mb-3">
                            <RAlert Variant="VariantType.Info"
                                   Text="@($"Expanded items: {string.Join(", ", expandedItemIds.Count > 0 ? expandedItemIds : new[] { "None" })}")" />
                        </div>
                        <RAccordion Multiple="true"
                                   OnExpanded="HandleItemExpanded"
                                   OnCollapsed="HandleItemCollapsed">
                            <RAccordionItem Text="Interactive Item 1" Id="item1" Icon="looks_one">
                                This accordion tracks which items are expanded using event callbacks
                            </RAccordionItem>
                            <RAccordionItem Text="Interactive Item 2" Id="item2" Icon="looks_two">
                                Watch the info alert above update as you expand/collapse items
                            </RAccordionItem>
                            <RAccordionItem Text="Interactive Item 3" Id="item3" Icon="looks_3">
                                Multiple items can be open at once with Multiple="true"
                            </RAccordionItem>
                        </RAccordion>
                    </div>
                </div>
            </RTabItem>

            <!-- Advanced Tab -->
            <RTabItem Title="Advanced" Icon="code">
                <div class="space-y-6">
                    <!-- With Subtitles -->
                    <div class="space-y-2">
                        <div class="text-h6 font-medium">With Subtitles</div>
                        <p class="text-sm text-muted mb-3">Add secondary text to accordion headers</p>
                        <RAccordion>
                            <RAccordionItem Text="User Profile"
                                          Subtitle="Last updated 2 days ago"
                                          Icon="person">
                                Manage your account settings, personal information, and preferences.
                            </RAccordionItem>
                            <RAccordionItem Text="Notification Settings"
                                          Subtitle="5 active alerts"
                                          Icon="notifications">
                                Configure email notifications, push alerts, and notification preferences.
                            </RAccordionItem>
                            <RAccordionItem Text="Security & Privacy"
                                          Subtitle="Last login today"
                                          Icon="security">
                                Two-factor authentication, password management, and privacy controls.
                            </RAccordionItem>
                        </RAccordion>
                    </div>

                    <!-- Custom Icons -->
                    <div class="space-y-2">
                        <div class="text-h6 font-medium">Custom Expand/Collapse Icons</div>
                        <p class="text-sm text-muted mb-3">Override default chevron icons</p>
                        <RAccordion ExpandIcon="add_circle" CollapseIcon="remove_circle">
                            <RAccordionItem Text="Custom Icon Item 1" Icon="folder">
                                Uses add/remove circle icons instead of default chevrons
                            </RAccordionItem>
                            <RAccordionItem Text="Custom Icon Item 2" Icon="folder_open">
                                Provides unique visual style for your accordion
                            </RAccordionItem>
                        </RAccordion>
                    </div>

                    <!-- Rich Content -->
                    <div class="space-y-2">
                        <div class="text-h6 font-medium">Rich Content</div>
                        <p class="text-sm text-muted mb-3">Accordion items can contain any content</p>
                        <RAccordion Separated="true">
                            <RAccordionItem Text="Form Content" Icon="edit_note">
                                <div class="space-y-3">
                                    <RTextInput Label="Full Name" Placeholder="Enter your name" />
                                    <RTextInput Label="Email Address" Placeholder="your@email.com" Type="FieldType.Email" />
                                    <RButton Text="Submit" Variant="VariantType.Primary" Size="SizeType.Small" />
                                </div>
                            </RAccordionItem>
                            <RAccordionItem Text="List Content" Icon="list">
                                <ul class="list-disc list-inside space-y-1">
                                    <li>Advanced component architecture</li>
                                    <li>Utility-first CSS system</li>
                                    <li>Comprehensive theme support</li>
                                    <li>Responsive design patterns</li>
                                </ul>
                            </RAccordionItem>
                            <RAccordionItem Text="Alert Content" Icon="notifications">
                                <RAlert Variant="VariantType.Info"
                                       Text="Information Alert"
                                       Subtitle="Accordion items can contain other R* components" />
                            </RAccordionItem>
                        </RAccordion>
                    </div>

                    <!-- FAQ Example -->
                    <div class="space-y-2">
                        <div class="text-h6 font-medium">FAQ Pattern</div>
                        <p class="text-sm text-muted mb-3">Common use case for accordions</p>
                        <RAccordion>
                            <RAccordionItem Text="How do I install RR.Blazor?" Icon="help">
                                <div class="space-y-2">
                                    <p>Install via NuGet Package Manager:</p>
                                    <code class="block pa-2 bg-surface-elevated rounded text-sm">
                                        dotnet add package RR.Blazor
                                    </code>
                                    <p class="text-sm">Then add the RThemeProvider to your layout.</p>
                                </div>
                            </RAccordionItem>
                            <RAccordionItem Text="What browsers are supported?" Icon="help">
                                RR.Blazor supports all modern browsers including Chrome, Firefox, Safari, and Edge.
                                Internet Explorer is not supported.
                            </RAccordionItem>
                            <RAccordionItem Text="Is it free for commercial use?" Icon="help">
                                Yes, RR.Blazor is licensed under MIT and can be used in commercial projects.
                            </RAccordionItem>
                            <RAccordionItem Text="How do I customize themes?" Icon="help">
                                Use the RThemeProvider component and CSS custom properties to customize colors,
                                spacing, and other design tokens throughout your application.
                            </RAccordionItem>
                        </RAccordion>
                    </div>
                </div>
            </RTabItem>
        </RTabs>
    </ChildContent>
    </RCard>
</div>

@code {
    private List<string> expandedItemIds = new();

    private void HandleItemExpanded(string itemId)
    {
        if (!expandedItemIds.Contains(itemId))
        {
            expandedItemIds.Add(itemId);
        }
    }

    private void HandleItemCollapsed(string itemId)
    {
        expandedItemIds.Remove(itemId);
    }
}
