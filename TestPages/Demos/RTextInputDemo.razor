@using RR.Blazor.Components.Core
@using RR.Blazor.Components.Form
@using RR.Blazor.Components.Feedback
@using RR.Blazor.Enums

<RCard Variant="CardVariant.Outlined" Text="RTextInput">
    <ChildContent>
        <RDivider Text="Text Input Component" 
                         Subtitle="Professional text input with floating labels, validation, and multiple variants" 
                         Icon="text_fields" />
        
        <div class="space-y-6">
            <!-- Basic Examples -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Basic Examples</div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <RTextInput @bind-Value="@_basicText" 
                                Label="Basic Input" 
                                Placeholder="Enter some text..." />
                    <RTextInput @bind-Value="@_withIcon" 
                                Label="With Icon" 
                                Placeholder="Search..." 
                                StartIcon="search" />
                    <RTextInput @bind-Value="@_endIcon" 
                                Label="End Icon" 
                                Placeholder="Enter password" 
                                Type="FieldType.Password"
                                EndIcon="visibility" />
                    <RTextInput @bind-Value="@_required" 
                                Label="Required Field" 
                                Placeholder="This field is required" 
                                Required="true" />
                </div>
            </div>

            <!-- Input Types -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Input Types</div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <RTextInput @bind-Value="@_email" 
                                Label="Email" 
                                Type="FieldType.Email"
                                Placeholder="user@example.com"
                                StartIcon="email" />
                    <RTextInput @bind-Value="@_phone" 
                                Label="Phone" 
                                Type="FieldType.Tel"
                                Placeholder="+1 (555) 123-4567"
                                StartIcon="phone" />
                    <RTextInput @bind-Value="@_url" 
                                Label="Website" 
                                Type="FieldType.Url"
                                Placeholder="https://example.com"
                                StartIcon="link" />
                    <RTextInput @bind-Value="@_number" 
                                Label="Number" 
                                Type="FieldType.Number"
                                Placeholder="123"
                                StartIcon="tag" />
                </div>
            </div>

            <!-- Multiline Text -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Multiline Text</div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <RTextInput @bind-Value="@_multiline" 
                                Label="Description" 
                                Placeholder="Enter a detailed description..."
                                IsMultiLine="true"
                                Rows="4" />
                    <RTextInput @bind-Value="@_withCharCount" 
                                Label="Limited Text" 
                                Placeholder="Enter text with character limit..."
                                IsMultiLine="true"
                                Rows="4"
                                MaxLength="200"
                                ShowCharacterCount="true" />
                </div>
            </div>

            <!-- Sizes and Variants -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Sizes</div>
                <div class="space-y-3">
                    <RTextInput @bind-Value="@_small" 
                                Label="Small Input" 
                                Size="SizeType.Small"
                                Placeholder="Small size input" />
                    <RTextInput @bind-Value="@_medium" 
                                Label="Medium Input" 
                                Size="SizeType.Medium"
                                Placeholder="Medium size input (default)" />
                    <RTextInput @bind-Value="@_large" 
                                Label="Large Input" 
                                Size="SizeType.Large"
                                Placeholder="Large size input" />
                </div>
            </div>

            <!-- States -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Input States</div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <RTextInput @bind-Value="@_disabled" 
                                Label="Disabled Input" 
                                Placeholder="This input is disabled"
                                Disabled="true" />
                    <RTextInput @bind-Value="@_readonly" 
                                Label="Read-only Input" 
                                Placeholder="This input is read-only"
                                ReadOnly="true" />
                    <RTextInput @bind-Value="@_error" 
                                Label="Error State" 
                                Placeholder="Input with error"
                                ValidationMessage="This field contains an error" />
                    <RTextInput @bind-Value="@_success" 
                                Label="Success State" 
                                Placeholder="Valid input"
                                StartIcon="check_circle"
                                Class="border-success" />
                </div>
            </div>

            <!-- Professional Use Cases -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Professional Use Cases</div>
                <div class="space-y-4">
                    <div>
                        <p class="text-sm text-muted mb-3">User Registration Form</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <RTextInput @bind-Value="@_userForm.FirstName" 
                                        Label="First Name" 
                                        Placeholder="John"
                                        Required="true" />
                            <RTextInput @bind-Value="@_userForm.LastName" 
                                        Label="Last Name" 
                                        Placeholder="Doe"
                                        Required="true" />
                            <RTextInput @bind-Value="@_userForm.Email" 
                                        Label="Email Address" 
                                        Type="FieldType.Email"
                                        Placeholder="john@example.com"
                                        StartIcon="email"
                                        Required="true" />
                            <RTextInput @bind-Value="@_userForm.Username" 
                                        Label="Username" 
                                        Placeholder="johndoe"
                                        StartIcon="person"
                                        Required="true" />
                        </div>
                    </div>

                    <div>
                        <p class="text-sm text-muted mb-3">Company Profile</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <RTextInput @bind-Value="@_companyForm.CompanyName" 
                                        Label="Company Name" 
                                        Placeholder="Acme Corporation"
                                        StartIcon="business" />
                            <RTextInput @bind-Value="@_companyForm.Website" 
                                        Label="Website" 
                                        Type="FieldType.Url"
                                        Placeholder="https://acme.com"
                                        StartIcon="language" />
                            <RTextInput @bind-Value="@_companyForm.Industry" 
                                        Label="Industry" 
                                        Placeholder="Technology"
                                        StartIcon="work" />
                            <RTextInput @bind-Value="@_companyForm.EmployeeCount" 
                                        Label="Employee Count" 
                                        Type="FieldType.Number"
                                        Placeholder="50"
                                        StartIcon="people" />
                        </div>
                        <RTextInput @bind-Value="@_companyForm.Description" 
                                    Label="Company Description" 
                                    Placeholder="Tell us about your company..."
                                    IsMultiLine="true"
                                    Rows="3"
                                    MaxLength="500"
                                    ShowCharacterCount="true" />
                    </div>

                    <div>
                        <p class="text-sm text-muted mb-3">Contact Information</p>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <RTextInput @bind-Value="@_contactForm.Phone" 
                                        Label="Phone" 
                                        Type="FieldType.Tel"
                                        Placeholder="+1 (555) 123-4567"
                                        StartIcon="phone" />
                            <RTextInput @bind-Value="@_contactForm.Extension" 
                                        Label="Extension" 
                                        Placeholder="1234"
                                        StartIcon="dialpad" />
                            <RTextInput @bind-Value="@_contactForm.Fax" 
                                        Label="Fax" 
                                        Type="FieldType.Tel"
                                        Placeholder="+1 (555) 123-4568"
                                        StartIcon="print" />
                        </div>
                    </div>
                </div>
            </div>

            <!-- Interactive Demo -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Interactive Demo</div>
                <div class="space-y-3">
                    <RTextInput @bind-Value="@_demoText" 
                                Label="Live Demo Input" 
                                Placeholder="Type here to see live feedback..."
                                StartIcon="edit"
                                @oninput="HandleDemoInput" />
                    
                    @if (!string.IsNullOrEmpty(_demoText))
                    {
                        <div class="pa-3 rounded bg-info-light text-info">
                            <i class="icon mr-2">info</i>
                            <strong>Live Value:</strong> "@_demoText" (Length: @_demoText.Length characters)
                        </div>
                    }
                </div>
            </div>

            <!-- Validation Demo -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Validation Example</div>
                <div class="space-y-3">
                    <RTextInput @bind-Value="@_validationEmail" 
                                Label="Email Validation" 
                                Type="FieldType.Email"
                                Placeholder="Enter a valid email address"
                                StartIcon="email"
                                ValidationMessage="@_validationMessage"
                                @onblur="ValidateEmail" />
                    
                    @if (!string.IsNullOrEmpty(_validationMessage))
                    {
                        <RAlert Type="@(_isValidEmail ? AlertType.Success : AlertType.Error)"
                                Message="@_validationMessage" />
                    }
                </div>
            </div>
        </div>
    </ChildContent>
</RCard>

@code {
    // Basic examples
    private string _basicText = "";
    private string _withIcon = "";
    private string _endIcon = "";
    private string _required = "";

    // Input types
    private string _email = "";
    private string _phone = "";
    private string _url = "";
    private string _number = "";

    // Multiline
    private string _multiline = "";
    private string _withCharCount = "";

    // Sizes
    private string _small = "";
    private string _medium = "";
    private string _large = "";

    // States
    private string _disabled = "Disabled value";
    private string _readonly = "Read-only value";
    private string _error = "Invalid input";
    private string _success = "Valid input";

    // Forms
    private UserFormModel _userForm = new();
    private CompanyFormModel _companyForm = new();
    private ContactFormModel _contactForm = new();

    // Interactive demo
    private string _demoText = "";

    // Validation demo
    private string _validationEmail = "";
    private string _validationMessage = "";
    private bool _isValidEmail = false;

    private void HandleDemoInput(ChangeEventArgs e)
    {
        _demoText = e.Value?.ToString() ?? "";
    }

    private void ValidateEmail()
    {
        if (string.IsNullOrEmpty(_validationEmail))
        {
            _validationMessage = "Email address is required";
            _isValidEmail = false;
        }
        else if (!_validationEmail.Contains("@") || !_validationEmail.Contains("."))
        {
            _validationMessage = "Please enter a valid email address";
            _isValidEmail = false;
        }
        else
        {
            _validationMessage = "Email address is valid";
            _isValidEmail = true;
        }
    }

    public class UserFormModel
    {
        public string FirstName { get; set; } = "";
        public string LastName { get; set; } = "";
        public string Email { get; set; } = "";
        public string Username { get; set; } = "";
    }

    public class CompanyFormModel
    {
        public string CompanyName { get; set; } = "";
        public string Website { get; set; } = "";
        public string Industry { get; set; } = "";
        public string EmployeeCount { get; set; } = "";
        public string Description { get; set; } = "";
    }

    public class ContactFormModel
    {
        public string Phone { get; set; } = "";
        public string Extension { get; set; } = "";
        public string Fax { get; set; } = "";
    }
}