@using RR.Blazor.Components.Core
@using RR.Blazor.Components.Display
@using RR.Blazor.Components.Navigation
@using RR.Blazor.Enums

<RCard Variant="CardVariant.Outlined" Text="RTabs">
    <ChildContent>
        <RDivider Text="Tab Navigation Component"
                  Subtitle="Organize content into tabbed sections with smooth transitions and professional styling"
                  Icon="tab" />
        
        <div class="space-y-6">
            <!-- Basic Tabs -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Basic Tabs</div>
                <RTabs @bind-SelectedTab="_basicSelectedTab">
                    <RTabItem Value="overview" Text="Overview" Icon="dashboard">
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2">Project Overview</h4>
                            <p class="text-body-1 text-muted">
                                This is the overview tab content. It contains general information about the project,
                                including key metrics, progress updates, and high-level summaries.
                            </p>
                        </div>
                    </RTabItem>
                    
                    <RTabItem Value="details" Text="Details" Icon="info">
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2">Project Details</h4>
                            <p class="text-body-1 text-muted">
                                Detailed information about the project specifications, requirements, and implementation details.
                                This tab typically contains more technical or comprehensive information.
                            </p>
                        </div>
                    </RTabItem>
                    
                    <RTabItem Value="settings" Text="Settings" Icon="settings">
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2">Project Settings</h4>
                            <p class="text-body-1 text-muted">
                                Configuration options and preferences for the project. Users can modify various
                                settings and preferences from this tab.
                            </p>
                        </div>
                    </RTabItem>
                </RTabs>
                <div class="mt-2 text-sm text-muted">Currently selected: @_basicSelectedTab</div>
            </div>

            <!-- Tab Variants -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Tab Variants</div>
                
                <div class="space-y-4">
                    <!-- Outlined Tabs -->
                    <div>
                        <h5 class="text-base font-medium mb-2">Outlined Style</h5>
                        <RTabs @bind-SelectedTab="_outlinedSelectedTab">
                            <RTabItem Value="profile" Text="Profile" Icon="person">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">User Profile</h4>
                                    <p class="text-body-2">Manage your personal information and account preferences.</p>
                                </div>
                            </RTabItem>
                            <RTabItem Value="security" Text="Security" Icon="security">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Security Settings</h4>
                                    <p class="text-body-2">Configure password, two-factor authentication, and security preferences.</p>
                                </div>
                            </RTabItem>
                            <RTabItem Value="notifications" Text="Notifications" Icon="notifications">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Notification Preferences</h4>
                                    <p class="text-body-2">Control how and when you receive notifications.</p>
                                </div>
                            </RTabItem>
                        </RTabs>
                    </div>

                    <!-- Filled Tabs -->
                    <div>
                        <h5 class="text-base font-medium mb-2">Filled Style</h5>
                        <RTabs @bind-SelectedTab="_filledSelectedTab">
                            <RTabItem Value="analytics" Text="Analytics" Icon="analytics">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Analytics Dashboard</h4>
                                    <p class="text-body-2">View detailed analytics and performance metrics.</p>
                                </div>
                            </RTabItem>
                            <RTabItem Value="reports" Text="Reports" Icon="assessment">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Generated Reports</h4>
                                    <p class="text-body-2">Access and download various reports and exports.</p>
                                </div>
                            </RTabItem>
                            <RTabItem Value="trends" Text="Trends" Icon="trending_up">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Trend Analysis</h4>
                                    <p class="text-body-2">Analyze trends and patterns in your data.</p>
                                </div>
                            </RTabItem>
                        </RTabs>
                    </div>
                </div>
            </div>

            <!-- Tab Positions -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Tab Positions</div>
                <div class="space-y-4">
                    <!-- Vertical Tabs -->
                    <div>
                        <h5 class="text-base font-medium mb-2">Vertical Tabs</h5>
                        <RTabs @bind-SelectedTab="_verticalSelectedTab" Orientation="TabOrientation.Vertical" Class="h-64">
                            <RTabItem Value="dashboard" Text="Dashboard" Icon="dashboard">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Dashboard</h4>
                                    <p class="text-body-2">Main dashboard with key metrics and overview information.</p>
                                </div>
                            </RTabItem>
                            <RTabItem Value="users" Text="Users" Icon="people">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">User Management</h4>
                                    <p class="text-body-2">Manage user accounts, permissions, and access levels.</p>
                                </div>
                            </RTabItem>
                            <RTabItem Value="content" Text="Content" Icon="article">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Content Management</h4>
                                    <p class="text-body-2">Create, edit, and organize content across your platform.</p>
                                </div>
                            </RTabItem>
                        </RTabs>
                    </div>
                </div>
            </div>

            <!-- Disabled and Loading States -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Special States</div>
                <RTabs @bind-SelectedTab="_statesSelectedTab">
                    <RTabItem Value="active" Text="Active Tab" Icon="check_circle">
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2">Active Content</h4>
                            <p class="text-body-2">This tab is active and fully functional.</p>
                        </div>
                    </RTabItem>
                    
                    <RTabItem Value="loading" Text="Loading" Icon="hourglass_empty" Loading="true">
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2">Loading Content</h4>
                            <p class="text-body-2">This content is being loaded...</p>
                        </div>
                    </RTabItem>
                    
                    <RTabItem Value="disabled" Text="Disabled" Icon="block" Disabled="true">
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2">Disabled Content</h4>
                            <p class="text-body-2">This tab is disabled and cannot be accessed.</p>
                        </div>
                    </RTabItem>
                    
                    <RTabItem Value="error" Text="Error State" Icon="error" HasError="true">
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2">Error Content</h4>
                            <p class="text-body-2 text-error">This tab has an error state.</p>
                        </div>
                    </RTabItem>
                </RTabs>
            </div>

            <!-- Professional Use Cases -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Professional Use Cases</div>
                <div class="space-y-6">
                    <!-- E-commerce Product Tabs -->
                    <RCard Variant="CardVariant.Glass" Class="p-4">
                        <ChildContent>
                            <h4 class="text-lg font-semibold mb-3">E-commerce Product Details</h4>
                            <RTabs @bind-SelectedTab="_productSelectedTab">
                                <RTabItem Value="description" Text="Description">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-2">Product Description</h5>
                                        <p class="text-body-2 mb-3">
                                            This premium wireless headphone delivers exceptional audio quality with active noise cancellation.
                                            Perfect for music lovers and professionals who demand superior sound performance.
                                        </p>
                                        <ul class="list-disc ml-5 text-body-2 space-y-1">
                                            <li>40mm dynamic drivers for rich, detailed sound</li>
                                            <li>Active Noise Cancellation (ANC) technology</li>
                                            <li>30-hour battery life with quick charge</li>
                                            <li>Premium comfortable over-ear design</li>
                                        </ul>
                                    </div>
                                </RTabItem>
                                
                                <RTabItem Value="specifications" Text="Specifications">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-3">Technical Specifications</h5>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                            <div><strong>Driver Size:</strong> 40mm</div>
                                            <div><strong>Frequency Response:</strong> 20Hz - 20kHz</div>
                                            <div><strong>Impedance:</strong> 32Ω</div>
                                            <div><strong>Sensitivity:</strong> 105dB</div>
                                            <div><strong>Battery Life:</strong> 30 hours</div>
                                            <div><strong>Charging Time:</strong> 2 hours</div>
                                            <div><strong>Weight:</strong> 250g</div>
                                            <div><strong>Connectivity:</strong> Bluetooth 5.0</div>
                                        </div>
                                    </div>
                                </RTabItem>
                                
                                <RTabItem Value="reviews" Text="Reviews" Badge="@_reviewCount.ToString()">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-3">Customer Reviews</h5>
                                        <div class="space-y-4">
                                            <div class="border-l-4 border-success pl-4">
                                                <div class="flex items-center gap-2 mb-1">
                                                    <span class="font-medium">John D.</span>
                                                    <span class="text-warning">★★★★★</span>
                                                </div>
                                                <p class="text-body-2">"Excellent sound quality and comfortable for long sessions."</p>
                                            </div>
                                            
                                            <div class="border-l-4 border-success pl-4">
                                                <div class="flex items-center gap-2 mb-1">
                                                    <span class="font-medium">Sarah M.</span>
                                                    <span class="text-warning">★★★★☆</span>
                                                </div>
                                                <p class="text-body-2">"Great ANC performance, battery life is impressive."</p>
                                            </div>
                                        </div>
                                    </div>
                                </RTabItem>
                                
                                <RTabItem Value="shipping" Text="Shipping & Returns">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-3">Shipping Information</h5>
                                        <div class="space-y-3 text-body-2">
                                            <div>
                                                <strong>Free Shipping:</strong> Orders over $50
                                            </div>
                                            <div>
                                                <strong>Standard Delivery:</strong> 3-5 business days ($5.99)
                                            </div>
                                            <div>
                                                <strong>Express Delivery:</strong> 1-2 business days ($12.99)
                                            </div>
                                            <div>
                                                <strong>Return Policy:</strong> 30-day money-back guarantee
                                            </div>
                                        </div>
                                    </div>
                                </RTabItem>
                            </RTabs>
                        </ChildContent>
                    </RCard>

                    <!-- Admin Dashboard Tabs -->
                    <RCard Variant="CardVariant.Glass" Class="p-4">
                        <ChildContent>
                            <h4 class="text-lg font-semibold mb-3">Admin Dashboard</h4>
                            <RTabs @bind-SelectedTab="_adminSelectedTab">
                                <RTabItem Value="overview" Text="Overview" Icon="dashboard">
                                    <div class="p-4">
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                            <div class="text-center p-4 bg-surface rounded">
                                                <div class="text-2xl font-bold text-primary">1,247</div>
                                                <div class="text-sm text-muted">Total Users</div>
                                            </div>
                                            <div class="text-center p-4 bg-surface rounded">
                                                <div class="text-2xl font-bold text-success">98.5%</div>
                                                <div class="text-sm text-muted">Uptime</div>
                                            </div>
                                            <div class="text-center p-4 bg-surface rounded">
                                                <div class="text-2xl font-bold text-warning">23</div>
                                                <div class="text-sm text-muted">Active Issues</div>
                                            </div>
                                        </div>
                                    </div>
                                </RTabItem>
                                
                                <RTabItem Value="users" Text="Users" Icon="people" Badge="@_userCount.ToString()">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-3">User Management</h5>
                                        <p class="text-body-2">Manage user accounts, roles, and permissions.</p>
                                    </div>
                                </RTabItem>
                                
                                <RTabItem Value="analytics" Text="Analytics" Icon="analytics">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-3">Analytics & Reports</h5>
                                        <p class="text-body-2">View detailed analytics and generate reports.</p>
                                    </div>
                                </RTabItem>
                                
                                <RTabItem Value="settings" Text="Settings" Icon="settings">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-3">System Settings</h5>
                                        <p class="text-body-2">Configure system-wide settings and preferences.</p>
                                    </div>
                                </RTabItem>
                            </RTabs>
                        </ChildContent>
                    </RCard>
                </div>
            </div>

            <!-- Dynamic Tab Management -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Dynamic Tab Management</div>
                <RCard Variant="CardVariant.Glass" Class="p-4">
                    <ChildContent>
                        <div class="mb-4">
                            <h4 class="text-lg font-semibold mb-2">Manage Tabs Dynamically</h4>
                            <div class="flex gap-2 mb-3">
                                <RButton Text="Add Tab" 
                                         Icon="add"
                                         Variant="ButtonVariant.Primary"
                                         Size="SizeType.Small"
                                         @onclick="AddDynamicTab" />
                                <RButton Text="Remove Last Tab" 
                                         Icon="remove"
                                         Variant="ButtonVariant.Secondary"
                                         Size="SizeType.Small"
                                         @onclick="RemoveDynamicTab"
                                         Disabled="@(_dynamicTabs.Count <= 1)" />
                            </div>
                        </div>
                        
                        <RTabs @bind-SelectedTab="_dynamicSelectedTab">
                            @foreach (var tab in _dynamicTabs)
                            {
                                <RTabItem Value="@tab.Value" Text="@tab.Text" Icon="@tab.Icon" Closable="@tab.Closable">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-2">@tab.Text</h5>
                                        <p class="text-body-2">Content for @tab.Text tab. Created dynamically at @tab.CreatedAt.ToString("HH:mm:ss").</p>
                                    </div>
                                </RTabItem>
                            }
                        </RTabs>
                        
                        <div class="mt-3 text-sm text-muted">
                            Total tabs: @_dynamicTabs.Count | Selected: @_dynamicSelectedTab
                        </div>
                    </ChildContent>
                </RCard>
            </div>
        </div>
    </ChildContent>
</RCard>

@code {
    // Tab selections
    private string _basicSelectedTab = "overview";
    private string _outlinedSelectedTab = "profile";
    private string _filledSelectedTab = "analytics";
    private string _verticalSelectedTab = "dashboard";
    private string _statesSelectedTab = "active";
    private string _productSelectedTab = "description";
    private string _adminSelectedTab = "overview";
    private string _dynamicSelectedTab = "tab1";

    // Badge counts
    private int _reviewCount = 127;
    private int _userCount = 1247;

    // Dynamic tabs
    private List<DynamicTab> _dynamicTabs = new();
    private int _nextTabId = 1;

    protected override Task OnInitializedAsync()
    {
        // Initialize dynamic tabs
        _dynamicTabs.Add(new DynamicTab
        {
            Value = "tab1",
            Text = "First Tab",
            Icon = "home",
            Closable = false,
            CreatedAt = DateTime.Now
        });
        
        return base.OnInitializedAsync();
    }

    private void AddDynamicTab()
    {
        _nextTabId++;
        var newTab = new DynamicTab
        {
            Value = $"tab{_nextTabId}",
            Text = $"Tab {_nextTabId}",
            Icon = "tab",
            Closable = true,
            CreatedAt = DateTime.Now
        };
        
        _dynamicTabs.Add(newTab);
        _dynamicSelectedTab = newTab.Value;
    }

    private void RemoveDynamicTab()
    {
        if (_dynamicTabs.Count > 1)
        {
            var lastTab = _dynamicTabs.Last();
            _dynamicTabs.Remove(lastTab);
            
            // If we removed the selected tab, select the first one
            if (_dynamicSelectedTab == lastTab.Value)
            {
                _dynamicSelectedTab = _dynamicTabs.First().Value;
            }
        }
    }

    public class DynamicTab
    {
        public string Value { get; set; } = string.Empty;
        public string Text { get; set; } = string.Empty;
        public string Icon { get; set; } = string.Empty;
        public bool Closable { get; set; }
        public DateTime CreatedAt { get; set; }
    }
}