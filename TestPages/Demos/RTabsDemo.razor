@using RR.Blazor.Components.Core
@using RR.Blazor.Components.Navigation
@using RR.Blazor.Components.Form
@using RR.Blazor.Enums

<RCard Variant="CardVariant.Outlined" Text="RTabs">
    <ChildContent>
        <RDivider Text="Interactive Tab Navigation Showcase"
                  Subtitle="Dynamically test all RTabs features with real-time configuration"
                  Icon="tab" />
        
        <!-- Control Panel -->
        <RCard Variant="CardVariant.Glass" Class="mb-6 p-4">
            <ChildContent>
                <div class="text-h6 font-semibold mb-4 flex items-center gap-2">
                    <i class="material-symbols-rounded">tune</i>
                    Tab Configuration Panel
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <!-- Variant Selector -->
                    <div>
                        <label class="text-sm text-muted mb-1 block">Variant</label>
                        <select @bind="_currentVariant" class="w-full px-3 py-2 rounded border border-light bg-surface text-sm">
                            <option value="@TabsVariant.Default">Default</option>
                            <option value="@TabsVariant.Pills">Pills</option>
                            <option value="@TabsVariant.Card">Card</option>
                            <option value="@TabsVariant.Underline">Underline</option>
                            <option value="@TabsVariant.Segment">Segment</option>
                            <option value="@TabsVariant.Elevated">Elevated</option>
                        </select>
                    </div>
                    
                    <!-- Orientation Selector -->
                    <div>
                        <label class="text-sm text-muted mb-1 block">Orientation</label>
                        <select @bind="_currentOrientation" class="w-full px-3 py-2 rounded border border-light bg-surface text-sm">
                            <option value="@TabOrientation.Horizontal">Horizontal</option>
                            <option value="@TabOrientation.Vertical">Vertical</option>
                        </select>
                    </div>
                    
                    <!-- Size Selector -->
                    <div>
                        <label class="text-sm text-muted mb-1 block">Size</label>
                        <select @bind="_currentSize" class="w-full px-3 py-2 rounded border border-light bg-surface text-sm">
                            <option value="@SizeType.ExtraSmall">Extra Small</option>
                            <option value="@SizeType.Small">Small</option>
                            <option value="@SizeType.Medium">Medium</option>
                            <option value="@SizeType.Large">Large</option>
                            <option value="@SizeType.ExtraLarge">Extra Large</option>
                        </select>
                    </div>
                    
                    <!-- Density Selector -->
                    <div>
                        <label class="text-sm text-muted mb-1 block">Density</label>
                        <select @bind="_currentDensity" class="w-full px-3 py-2 rounded border border-light bg-surface text-sm">
                            <option value="@DensityType.Compact">Compact</option>
                            <option value="@DensityType.Dense">Dense</option>
                            <option value="@DensityType.Normal">Normal</option>
                            <option value="@DensityType.Spacious">Spacious</option>
                        </select>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 mt-4">
                    <!-- Toggle Options -->
                    <RToggle @bind-Value="_showIcons" Label="Show Icons" Size="SizeType.Small" />
                    <RToggle @bind-Value="_showBadges" Label="Show Badges" Size="SizeType.Small" />
                    <RToggle @bind-Value="_closableTabs" Label="Closable Tabs" Size="SizeType.Small" />
                    <RToggle @bind-Value="_showAddButton" Label="Add Button" Size="SizeType.Small" />
                    <RToggle @bind-Value="_scrollableTabs" Label="Scrollable" Size="SizeType.Small" />
                    <RToggle @bind-Value="_fadeAnimation" Label="Fade Animation" Size="SizeType.Small" />
                    <RToggle @bind-Value="_keepAlive" Label="Keep Alive" Size="SizeType.Small" />
                    <RToggle @bind-Value="_noPadding" Label="No Padding" Size="SizeType.Small" />
                    <RToggle @bind-Value="_hasDisabledTab" Label="Disabled Tab" Size="SizeType.Small" />
                    <RToggle @bind-Value="_hasLoadingTab" Label="Loading Tab" Size="SizeType.Small" />
                    <RToggle @bind-Value="_hasErrorTab" Label="Error Tab" Size="SizeType.Small" />
                    <RToggle @bind-Value="_showTooltips" Label="Tooltips" Size="SizeType.Small" />
                </div>
                
                <div class="flex gap-2 mt-4">
                    <RButton Text="Add Tab" 
                             Icon="add"
                             Variant="ButtonVariant.Primary"
                             Size="SizeType.Small"
                             @onclick="AddConfigurableTab" />
                    <RButton Text="Remove Last Tab" 
                             Icon="remove"
                             Variant="ButtonVariant.Secondary"
                             Size="SizeType.Small"
                             @onclick="RemoveLastConfigurableTab"
                             Disabled="@(_configurableTabs.Count <= 2)" />
                    <RButton Text="Reset to Default" 
                             Icon="refresh"
                             Variant="ButtonVariant.Ghost"
                             Size="SizeType.Small"
                             @onclick="ResetConfiguration" />
                </div>
                
                <div class="mt-3 p-2 bg-surface rounded text-xs text-muted">
                    Current Config: @_currentVariant | @_currentOrientation | @_currentSize | @_currentDensity | 
                    Tabs: @_configurableTabs.Count | Selected: @_configurableSelectedTab
                </div>
            </ChildContent>
        </RCard>
        
        <!-- Live Demo Area -->
        <RCard Variant="CardVariant.Elevated" Class="mb-6">
            <ChildContent>
                <div class="text-h6 font-semibold mb-4 flex items-center gap-2">
                    <i class="material-symbols-rounded">play_circle</i>
                    Live Demo - Interactive Configuration
                </div>
                
                <div class="@(_currentOrientation == TabOrientation.Vertical ? "h-96" : "")">
                    <RTabs @bind-SelectedTab="_configurableSelectedTab"
                           Variant="_currentVariant"
                           Orientation="_currentOrientation"
                           Size="_currentSize"
                           Density="_currentDensity"
                           ShowAddButton="_showAddButton"
                           NoPadding="_noPadding"
                           FadeOnly="_fadeAnimation"
                           KeepPanelsAlive="_keepAlive"
                           OnAddTab="@(() => HandleAddTab())"
                           OnTabChanged="@((args) => HandleTabChanged(args))"
                           OnTabClosed="@((args) => HandleTabClosed(args))"
                           Class="@(_scrollableTabs ? "max-w-full overflow-x-auto" : "")">
                        @foreach (var tab in _configurableTabs)
                        {
                            <RTabItem Value="@tab.Value" 
                                      Text="@tab.Text" 
                                      Icon="@(_showIcons ? tab.Icon : null)"
                                      Badge="@(_showBadges && tab.Badge > 0 ? tab.Badge.ToString() : null)"
                                      Closable="@(_closableTabs && tab.Closable)"
                                      Disabled="@(_hasDisabledTab && tab.Value == "disabled")"
                                      Loading="@(_hasLoadingTab && tab.Value == "loading")"
                                      HasError="@(_hasErrorTab && tab.Value == "error")"
                                      Tooltip="@(_showTooltips ? tab.Tooltip : null)">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">@tab.Text Content</h4>
                                    <p class="text-body-2 text-muted mb-3">@tab.Description</p>
                                    
                                    @if (tab.ShowMetrics)
                                    {
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                                            <div class="text-center p-3 bg-surface rounded">
                                                <div class="text-2xl font-bold text-primary">@tab.Metric1</div>
                                                <div class="text-sm text-muted">Metric 1</div>
                                            </div>
                                            <div class="text-center p-3 bg-surface rounded">
                                                <div class="text-2xl font-bold text-success">@tab.Metric2</div>
                                                <div class="text-sm text-muted">Metric 2</div>
                                            </div>
                                            <div class="text-center p-3 bg-surface rounded">
                                                <div class="text-2xl font-bold text-warning">@tab.Metric3</div>
                                                <div class="text-sm text-muted">Metric 3</div>
                                            </div>
                                        </div>
                                    }
                                    
                                    <div class="mt-4 text-xs text-muted">
                                        Tab ID: @tab.Value | Created: @tab.CreatedAt.ToString("HH:mm:ss")
                                        @if (tab.LastModified != null)
                                        {
                                            <span> | Modified: @tab.LastModified.Value.ToString("HH:mm:ss")</span>
                                        }
                                    </div>
                                </div>
                            </RTabItem>
                        }
                    </RTabs>
                </div>
                
                @if (!string.IsNullOrEmpty(_lastEvent))
                {
                    <div class="mt-4 p-3 bg-info-light rounded">
                        <span class="text-sm text-info">
                            <i class="material-symbols-rounded text-sm">info</i>
                            Last Event: @_lastEvent
                        </span>
                    </div>
                }
            </ChildContent>
        </RCard>
        
        <div class="space-y-6">
            <!-- Basic Tabs -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Basic Tabs</div>
                <RTabs @bind-SelectedTab="_basicSelectedTab">
                    <RTabItem Value="overview" Text="Overview" Icon="dashboard">
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2">Project Overview</h4>
                            <p class="text-body-1 text-muted">
                                This is the overview tab content. It contains general information about the project,
                                including key metrics, progress updates, and high-level summaries.
                            </p>
                        </div>
                    </RTabItem>
                    
                    <RTabItem Value="details" Text="Details" Icon="info">
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2">Project Details</h4>
                            <p class="text-body-1 text-muted">
                                Detailed information about the project specifications, requirements, and implementation details.
                                This tab typically contains more technical or comprehensive information.
                            </p>
                        </div>
                    </RTabItem>
                    
                    <RTabItem Value="settings" Text="Settings" Icon="settings">
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2">Project Settings</h4>
                            <p class="text-body-1 text-muted">
                                Configuration options and preferences for the project. Users can modify various
                                settings and preferences from this tab.
                            </p>
                        </div>
                    </RTabItem>
                </RTabs>
                <div class="mt-2 text-sm text-muted">Currently selected: @_basicSelectedTab</div>
            </div>

            <!-- Tab Variants -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Tab Variants</div>
                
                <div class="space-y-4">
                    <!-- Pills Tabs -->
                    <div>
                        <h5 class="text-base font-medium mb-2">Pills Style</h5>
                        <RTabs @bind-SelectedTab="_outlinedSelectedTab" Variant="TabsVariant.Pills">
                            <RTabItem Value="profile" Text="Profile" Icon="person">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">User Profile</h4>
                                    <p class="text-body-2">Manage your personal information and account preferences.</p>
                                </div>
                            </RTabItem>
                            <RTabItem Value="security" Text="Security" Icon="security">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Security Settings</h4>
                                    <p class="text-body-2">Configure password, two-factor authentication, and security preferences.</p>
                                </div>
                            </RTabItem>
                            <RTabItem Value="notifications" Text="Notifications" Icon="notifications">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Notification Preferences</h4>
                                    <p class="text-body-2">Control how and when you receive notifications.</p>
                                </div>
                            </RTabItem>
                        </RTabs>
                    </div>

                    <!-- Card Tabs -->
                    <div>
                        <h5 class="text-base font-medium mb-2">Card Style</h5>
                        <RTabs @bind-SelectedTab="_filledSelectedTab" Variant="TabsVariant.Card">
                            <RTabItem Value="analytics" Text="Analytics" Icon="analytics">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Analytics Dashboard</h4>
                                    <p class="text-body-2">View detailed analytics and performance metrics.</p>
                                </div>
                            </RTabItem>
                            <RTabItem Value="reports" Text="Reports" Icon="assessment">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Generated Reports</h4>
                                    <p class="text-body-2">Access and download various reports and exports.</p>
                                </div>
                            </RTabItem>
                            <RTabItem Value="trends" Text="Trends" Icon="trending_up">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Trend Analysis</h4>
                                    <p class="text-body-2">Analyze trends and patterns in your data.</p>
                                </div>
                            </RTabItem>
                        </RTabs>
                    </div>

                    <!-- Underline Tabs -->
                    <div>
                        <h5 class="text-base font-medium mb-2">Underline Style</h5>
                        <RTabs @bind-SelectedTab="_underlineSelectedTab" Variant="TabsVariant.Underline">
                            <RTabItem Value="home" Text="Home" Icon="home">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Home Dashboard</h4>
                                    <p class="text-body-2">Welcome to your home dashboard.</p>
                                </div>
                            </RTabItem>
                            <RTabItem Value="profile" Text="Profile" Icon="person">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">User Profile</h4>
                                    <p class="text-body-2">Manage your profile settings.</p>
                                </div>
                            </RTabItem>
                        </RTabs>
                    </div>

                    <!-- Segment Tabs -->
                    <div>
                        <h5 class="text-base font-medium mb-2">Segment Style</h5>
                        <RTabs @bind-SelectedTab="_segmentSelectedTab" Variant="TabsVariant.Segment">
                            <RTabItem Value="list" Text="List" Icon="list">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">List View</h4>
                                    <p class="text-body-2">Display items in a list format.</p>
                                </div>
                            </RTabItem>
                            <RTabItem Value="grid" Text="Grid" Icon="grid_view">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Grid View</h4>
                                    <p class="text-body-2">Display items in a grid format.</p>
                                </div>
                            </RTabItem>
                        </RTabs>
                    </div>
                </div>
            </div>

            <!-- Tab Positions -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Tab Positions</div>
                <div class="space-y-4">
                    <!-- Vertical Tabs -->
                    <div>
                        <h5 class="text-base font-medium mb-2">Vertical Tabs</h5>
                        <RTabs @bind-SelectedTab="_verticalSelectedTab" Orientation="TabOrientation.Vertical" Class="h-64">
                            <RTabItem Value="dashboard" Text="Dashboard" Icon="dashboard">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Dashboard</h4>
                                    <p class="text-body-2">Main dashboard with key metrics and overview information.</p>
                                </div>
                            </RTabItem>
                            <RTabItem Value="users" Text="Users" Icon="people">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">User Management</h4>
                                    <p class="text-body-2">Manage user accounts, permissions, and access levels.</p>
                                </div>
                            </RTabItem>
                            <RTabItem Value="content" Text="Content" Icon="article">
                                <div class="p-4">
                                    <h4 class="text-lg font-semibold mb-2">Content Management</h4>
                                    <p class="text-body-2">Create, edit, and organize content across your platform.</p>
                                </div>
                            </RTabItem>
                        </RTabs>
                    </div>
                </div>
            </div>

            <!-- Disabled and Loading States -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Special States</div>
                <RTabs @bind-SelectedTab="_statesSelectedTab">
                    <RTabItem Value="active" Text="Active Tab" Icon="check_circle">
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2">Active Content</h4>
                            <p class="text-body-2">This tab is active and fully functional.</p>
                        </div>
                    </RTabItem>
                    
                    <RTabItem Value="loading" Text="Loading" Icon="hourglass_empty" Loading="true">
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2">Loading Content</h4>
                            <p class="text-body-2">This content is being loaded...</p>
                        </div>
                    </RTabItem>
                    
                    <RTabItem Value="disabled" Text="Disabled" Icon="block" Disabled="true">
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2">Disabled Content</h4>
                            <p class="text-body-2">This tab is disabled and cannot be accessed.</p>
                        </div>
                    </RTabItem>
                    
                    <RTabItem Value="error" Text="Error State" Icon="error" HasError="true">
                        <div class="p-4">
                            <h4 class="text-lg font-semibold mb-2">Error Content</h4>
                            <p class="text-body-2 text-error">This tab has an error state.</p>
                        </div>
                    </RTabItem>
                </RTabs>
            </div>

            <!-- Professional Use Cases -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Professional Use Cases</div>
                <div class="space-y-6">
                    <!-- E-commerce Product Tabs -->
                    <RCard Variant="CardVariant.Glass" Class="p-4">
                        <ChildContent>
                            <h4 class="text-lg font-semibold mb-3">E-commerce Product Details</h4>
                            <RTabs @bind-SelectedTab="_productSelectedTab">
                                <RTabItem Value="description" Text="Description">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-2">Product Description</h5>
                                        <p class="text-body-2 mb-3">
                                            This premium wireless headphone delivers exceptional audio quality with active noise cancellation.
                                            Perfect for music lovers and professionals who demand superior sound performance.
                                        </p>
                                        <ul class="list-disc ml-5 text-body-2 space-y-1">
                                            <li>40mm dynamic drivers for rich, detailed sound</li>
                                            <li>Active Noise Cancellation (ANC) technology</li>
                                            <li>30-hour battery life with quick charge</li>
                                            <li>Premium comfortable over-ear design</li>
                                        </ul>
                                    </div>
                                </RTabItem>
                                
                                <RTabItem Value="specifications" Text="Specifications">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-3">Technical Specifications</h5>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                            <div><strong>Driver Size:</strong> 40mm</div>
                                            <div><strong>Frequency Response:</strong> 20Hz - 20kHz</div>
                                            <div><strong>Impedance:</strong> 32Ω</div>
                                            <div><strong>Sensitivity:</strong> 105dB</div>
                                            <div><strong>Battery Life:</strong> 30 hours</div>
                                            <div><strong>Charging Time:</strong> 2 hours</div>
                                            <div><strong>Weight:</strong> 250g</div>
                                            <div><strong>Connectivity:</strong> Bluetooth 5.0</div>
                                        </div>
                                    </div>
                                </RTabItem>
                                
                                <RTabItem Value="reviews" Text="Reviews" Badge="@_reviewCount.ToString()">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-3">Customer Reviews</h5>
                                        <div class="space-y-4">
                                            <div class="border-l-4 border-success pl-4">
                                                <div class="flex items-center gap-2 mb-1">
                                                    <span class="font-medium">John D.</span>
                                                    <span class="text-warning">★★★★★</span>
                                                </div>
                                                <p class="text-body-2">"Excellent sound quality and comfortable for long sessions."</p>
                                            </div>
                                            
                                            <div class="border-l-4 border-success pl-4">
                                                <div class="flex items-center gap-2 mb-1">
                                                    <span class="font-medium">Sarah M.</span>
                                                    <span class="text-warning">★★★★☆</span>
                                                </div>
                                                <p class="text-body-2">"Great ANC performance, battery life is impressive."</p>
                                            </div>
                                        </div>
                                    </div>
                                </RTabItem>
                                
                                <RTabItem Value="shipping" Text="Shipping & Returns">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-3">Shipping Information</h5>
                                        <div class="space-y-3 text-body-2">
                                            <div>
                                                <strong>Free Shipping:</strong> Orders over $50
                                            </div>
                                            <div>
                                                <strong>Standard Delivery:</strong> 3-5 business days ($5.99)
                                            </div>
                                            <div>
                                                <strong>Express Delivery:</strong> 1-2 business days ($12.99)
                                            </div>
                                            <div>
                                                <strong>Return Policy:</strong> 30-day money-back guarantee
                                            </div>
                                        </div>
                                    </div>
                                </RTabItem>
                            </RTabs>
                        </ChildContent>
                    </RCard>

                    <!-- Admin Dashboard Tabs -->
                    <RCard Variant="CardVariant.Glass" Class="p-4">
                        <ChildContent>
                            <h4 class="text-lg font-semibold mb-3">Admin Dashboard</h4>
                            <RTabs @bind-SelectedTab="_adminSelectedTab">
                                <RTabItem Value="overview" Text="Overview" Icon="dashboard">
                                    <div class="p-4">
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                            <div class="text-center p-4 bg-surface rounded">
                                                <div class="text-2xl font-bold text-primary">1,247</div>
                                                <div class="text-sm text-muted">Total Users</div>
                                            </div>
                                            <div class="text-center p-4 bg-surface rounded">
                                                <div class="text-2xl font-bold text-success">98.5%</div>
                                                <div class="text-sm text-muted">Uptime</div>
                                            </div>
                                            <div class="text-center p-4 bg-surface rounded">
                                                <div class="text-2xl font-bold text-warning">23</div>
                                                <div class="text-sm text-muted">Active Issues</div>
                                            </div>
                                        </div>
                                    </div>
                                </RTabItem>
                                
                                <RTabItem Value="users" Text="Users" Icon="people" Badge="@_userCount.ToString()">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-3">User Management</h5>
                                        <p class="text-body-2">Manage user accounts, roles, and permissions.</p>
                                    </div>
                                </RTabItem>
                                
                                <RTabItem Value="analytics" Text="Analytics" Icon="analytics">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-3">Analytics & Reports</h5>
                                        <p class="text-body-2">View detailed analytics and generate reports.</p>
                                    </div>
                                </RTabItem>
                                
                                <RTabItem Value="settings" Text="Settings" Icon="settings">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-3">System Settings</h5>
                                        <p class="text-body-2">Configure system-wide settings and preferences.</p>
                                    </div>
                                </RTabItem>
                            </RTabs>
                        </ChildContent>
                    </RCard>
                </div>
            </div>

            <!-- Dynamic Tab Management -->
            <div class="space-y-2">
                <div class="text-h6 font-semibold">Dynamic Tab Management</div>
                <RCard Variant="CardVariant.Glass" Class="p-4">
                    <ChildContent>
                        <div class="mb-4">
                            <h4 class="text-lg font-semibold mb-2">Manage Tabs Dynamically</h4>
                            <div class="flex gap-2 mb-3">
                                <RButton Text="Add Tab" 
                                         Icon="add"
                                         Variant="ButtonVariant.Primary"
                                         Size="SizeType.Small"
                                         @onclick="AddDynamicTab" />
                                <RButton Text="Remove Last Tab" 
                                         Icon="remove"
                                         Variant="ButtonVariant.Secondary"
                                         Size="SizeType.Small"
                                         @onclick="RemoveDynamicTab"
                                         Disabled="@(_dynamicTabs.Count <= 1)" />
                            </div>
                        </div>
                        
                        <RTabs @bind-SelectedTab="_dynamicSelectedTab">
                            @foreach (var tab in _dynamicTabs)
                            {
                                <RTabItem Value="@tab.Value" Text="@tab.Text" Icon="@tab.Icon" Closable="@tab.Closable">
                                    <div class="p-4">
                                        <h5 class="font-semibold mb-2">@tab.Text</h5>
                                        <p class="text-body-2">Content for @tab.Text tab. Created dynamically at @tab.CreatedAt.ToString("HH:mm:ss").</p>
                                    </div>
                                </RTabItem>
                            }
                        </RTabs>
                        
                        <div class="mt-3 text-sm text-muted">
                            Total tabs: @_dynamicTabs.Count | Selected: @_dynamicSelectedTab
                        </div>
                    </ChildContent>
                </RCard>
            </div>
        </div>
    </ChildContent>
</RCard>

@code {
    // Configuration Panel State
    private TabsVariant _currentVariant = TabsVariant.Default;
    private TabOrientation _currentOrientation = TabOrientation.Horizontal;
    private SizeType _currentSize = SizeType.Medium;
    private DensityType _currentDensity = DensityType.Normal;
    
    // Toggle Options
    private bool _showIcons = true;
    private bool _showBadges = true;
    private bool _closableTabs = false;
    private bool _showAddButton = false;
    private bool _scrollableTabs = false;
    private bool _fadeAnimation = false;
    private bool _keepAlive = false;
    private bool _noPadding = false;
    private bool _hasDisabledTab = false;
    private bool _hasLoadingTab = false;
    private bool _hasErrorTab = false;
    private bool _showTooltips = true;
    
    // Configurable Tabs
    private string _configurableSelectedTab = "tab1";
    private List<ConfigurableTab> _configurableTabs = new();
    private int _configurableTabCounter = 4;
    private string _lastEvent = "";
    
    // Tab selections
    private string _basicSelectedTab = "overview";
    private string _outlinedSelectedTab = "profile";
    private string _filledSelectedTab = "analytics";
    private string _underlineSelectedTab = "home";
    private string _segmentSelectedTab = "list";
    private string _verticalSelectedTab = "dashboard";
    private string _statesSelectedTab = "active";
    private string _productSelectedTab = "description";
    private string _adminSelectedTab = "overview";
    private string _dynamicSelectedTab = "tab1";

    // Badge counts
    private int _reviewCount = 127;
    private int _userCount = 1247;

    // Dynamic tabs
    private List<DynamicTab> _dynamicTabs = new();
    private int _nextTabId = 1;

    protected override Task OnInitializedAsync()
    {
        // Initialize configurable tabs
        _configurableTabs = new List<ConfigurableTab>
        {
            new() { 
                Value = "tab1", 
                Text = "Dashboard", 
                Icon = "dashboard",
                Description = "Main dashboard with key metrics and overview information",
                Tooltip = "View dashboard metrics",
                Badge = 5,
                ShowMetrics = true,
                Metric1 = "1,234",
                Metric2 = "98.5%",
                Metric3 = "42",
                CreatedAt = DateTime.Now 
            },
            new() { 
                Value = "tab2", 
                Text = "Analytics", 
                Icon = "analytics",
                Description = "Detailed analytics and reporting features",
                Tooltip = "View analytics",
                Badge = 12,
                ShowMetrics = true,
                Metric1 = "5,678",
                Metric2 = "87.3%",
                Metric3 = "156",
                CreatedAt = DateTime.Now 
            },
            new() { 
                Value = "tab3", 
                Text = "Settings", 
                Icon = "settings",
                Description = "Configuration and preferences",
                Tooltip = "Configure settings",
                Closable = true,
                CreatedAt = DateTime.Now 
            },
            new() { 
                Value = "disabled", 
                Text = "Disabled", 
                Icon = "block",
                Description = "This tab is disabled for demonstration",
                Tooltip = "This tab is disabled",
                CreatedAt = DateTime.Now 
            },
            new() { 
                Value = "loading", 
                Text = "Loading", 
                Icon = "hourglass_empty",
                Description = "This tab shows loading state",
                Tooltip = "Loading content...",
                CreatedAt = DateTime.Now 
            },
            new() { 
                Value = "error", 
                Text = "Error", 
                Icon = "error",
                Description = "This tab has an error state",
                Tooltip = "Error occurred",
                Badge = 1,
                CreatedAt = DateTime.Now 
            }
        };
        
        // Initialize dynamic tabs
        _dynamicTabs.Add(new DynamicTab
        {
            Value = "tab1",
            Text = "First Tab",
            Icon = "home",
            Closable = false,
            CreatedAt = DateTime.Now
        });
        
        return base.OnInitializedAsync();
    }
    
    // Configuration Panel Methods
    private void AddConfigurableTab()
    {
        _configurableTabCounter++;
        var newTab = new ConfigurableTab
        {
            Value = $"tab{_configurableTabCounter}",
            Text = $"Tab {_configurableTabCounter}",
            Icon = GetRandomIcon(),
            Description = $"Dynamically added tab #{_configurableTabCounter}",
            Tooltip = $"Tab {_configurableTabCounter} tooltip",
            Badge = Random.Shared.Next(0, 100),
            Closable = true,
            ShowMetrics = Random.Shared.Next(0, 2) == 1,
            Metric1 = Random.Shared.Next(100, 9999).ToString(),
            Metric2 = $"{Random.Shared.Next(70, 100)}.{Random.Shared.Next(0, 9)}%",
            Metric3 = Random.Shared.Next(10, 500).ToString(),
            CreatedAt = DateTime.Now
        };
        
        _configurableTabs.Add(newTab);
        _configurableSelectedTab = newTab.Value;
        _lastEvent = $"Added tab: {newTab.Text}";
    }
    
    private void RemoveLastConfigurableTab()
    {
        if (_configurableTabs.Count > 2)
        {
            var lastTab = _configurableTabs.Last();
            _configurableTabs.Remove(lastTab);
            
            if (_configurableSelectedTab == lastTab.Value)
            {
                _configurableSelectedTab = _configurableTabs.First().Value;
            }
            
            _lastEvent = $"Removed tab: {lastTab.Text}";
        }
    }
    
    private void ResetConfiguration()
    {
        _currentVariant = TabsVariant.Default;
        _currentOrientation = TabOrientation.Horizontal;
        _currentSize = SizeType.Medium;
        _currentDensity = DensityType.Normal;
        _showIcons = true;
        _showBadges = true;
        _closableTabs = false;
        _showAddButton = false;
        _scrollableTabs = false;
        _fadeAnimation = false;
        _keepAlive = false;
        _noPadding = false;
        _hasDisabledTab = false;
        _hasLoadingTab = false;
        _hasErrorTab = false;
        _showTooltips = true;
        _lastEvent = "Configuration reset to defaults";
    }
    
    private void HandleAddTab()
    {
        AddConfigurableTab();
    }
    
    private void HandleTabChanged(TabChangedEventArgs args)
    {
        _lastEvent = $"Tab changed: {args.OldValue} → {args.NewValue}";
    }
    
    private void HandleTabClosed(TabClosedEventArgs args)
    {
        var tabToRemove = _configurableTabs.FirstOrDefault(t => t.Value == args.TabValue);
        if (tabToRemove != null)
        {
            _configurableTabs.Remove(tabToRemove);
            _lastEvent = $"Tab closed: {tabToRemove.Text}";
            
            if (_configurableSelectedTab == args.TabValue && _configurableTabs.Any())
            {
                _configurableSelectedTab = _configurableTabs.First().Value;
            }
        }
    }
    
    private string GetRandomIcon()
    {
        var icons = new[] { "folder", "star", "bookmark", "favorite", "info", "help", "article", "description", "assignment", "task" };
        return icons[Random.Shared.Next(icons.Length)];
    }

    private void AddDynamicTab()
    {
        _nextTabId++;
        var newTab = new DynamicTab
        {
            Value = $"tab{_nextTabId}",
            Text = $"Tab {_nextTabId}",
            Icon = "tab",
            Closable = true,
            CreatedAt = DateTime.Now
        };
        
        _dynamicTabs.Add(newTab);
        _dynamicSelectedTab = newTab.Value;
    }

    private void RemoveDynamicTab()
    {
        if (_dynamicTabs.Count > 1)
        {
            var lastTab = _dynamicTabs.Last();
            _dynamicTabs.Remove(lastTab);
            
            // If we removed the selected tab, select the first one
            if (_dynamicSelectedTab == lastTab.Value)
            {
                _dynamicSelectedTab = _dynamicTabs.First().Value;
            }
        }
    }

    public class DynamicTab
    {
        public string Value { get; set; } = string.Empty;
        public string Text { get; set; } = string.Empty;
        public string Icon { get; set; } = string.Empty;
        public bool Closable { get; set; }
        public DateTime CreatedAt { get; set; }
    }
    
    public class ConfigurableTab
    {
        public string Value { get; set; } = string.Empty;
        public string Text { get; set; } = string.Empty;
        public string Icon { get; set; } = string.Empty;
        public string Description { get; set; } = string.Empty;
        public string Tooltip { get; set; } = string.Empty;
        public int Badge { get; set; }
        public bool Closable { get; set; }
        public bool ShowMetrics { get; set; }
        public string Metric1 { get; set; } = "0";
        public string Metric2 { get; set; } = "0%";
        public string Metric3 { get; set; } = "0";
        public DateTime CreatedAt { get; set; }
        public DateTime? LastModified { get; set; }
    }
    
    public class TabChangedEventArgs
    {
        public string OldValue { get; set; } = string.Empty;
        public string NewValue { get; set; } = string.Empty;
    }
    
    public class TabClosedEventArgs
    {
        public string TabValue { get; set; } = string.Empty;
    }
    
    public enum TabOrientation
    {
        Horizontal,
        Vertical
    }
}