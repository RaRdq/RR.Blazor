@page "/test/app-shell-search"
@using RR.Blazor.Components
@using RR.Blazor.Models
@using RR.Blazor.Enums
@using RR.Blazor.Services

<PageTitle>RAppShell Search Test</PageTitle>

<RAppShell Title="Search Test App" 
           Features="@GetTestFeatures()"
           CurrentUser="@currentUser"
           NavigationItems="@navigationItems">
    
    <div class="p-6 space-y-6">
        <RHeaderCard Title="RAppShell Search Test" 
                     Icon="search" 
                     Variant="CardVariant.Gradient">
            <p class="text-lg text-gray-600">
                This page demonstrates the new RAppShell search functionality with RAutosuggest integration.
                Click the search icon in the header to test the smooth expanding animation and search capabilities.
            </p>
        </RHeaderCard>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <RCard Text="Search Features" 
                   Icon="search" 
                   Variant="CardVariant.Elevated">
                <ul class="space-y-2 text-sm">
                    <li>‚úì Icon-only search button in header</li>
                    <li>‚úì Smooth left-expanding animation</li>
                    <li>‚úì RAutosuggest integration</li>
                    <li>‚úì Type-safe search results</li>
                    <li>‚úì Debounced search (300ms)</li>
                    <li>‚úì Keyboard navigation support</li>
                </ul>
            </RCard>

            <RCard Text="Animation Details" 
                   Icon="animation" 
                   Variant="CardVariant.Elevated">
                <ul class="space-y-2 text-sm">
                    <li>‚úì CSS transitions with easing</li>
                    <li>‚úì Glass effect with backdrop blur</li>
                    <li>‚úì Utility-first SCSS approach</li>
                    <li>‚úì Mobile-responsive behavior</li>
                    <li>‚úì Focus management</li>
                    <li>‚úì Accessible interactions</li>
                </ul>
            </RCard>

            <RCard Text="Technical Implementation" 
                   Icon="code" 
                   Variant="CardVariant.Elevated">
                <ul class="space-y-2 text-sm">
                    <li>‚úì RAutosuggestGeneric&lt;AppSearchResult&gt;</li>
                    <li>‚úì IAppSearchService integration</li>
                    <li>‚úì Custom SCSS animations</li>
                    <li>‚úì Event handling optimization</li>
                    <li>‚úì Clean legacy code removal</li>
                    <li>‚úì Performance optimizations</li>
                </ul>
            </RCard>
        </div>

        <RCard Text="Search Instructions" 
               Icon="help" 
               Variant="CardVariant.Glass">
            <div class="space-y-4">
                <h3 class="text-lg font-semibold text-gray-900">How to Test the Search</h3>
                <ol class="list-decimal list-inside space-y-2 text-sm text-gray-700">
                    <li>Look for the search icon (üîç) in the top-right corner of the header</li>
                    <li>Click the search icon to see the smooth expanding animation</li>
                    <li>Type any search query to trigger the autosuggest functionality</li>
                    <li>Use arrow keys to navigate through search results</li>
                    <li>Press Enter to select a result or click outside to close</li>
                    <li>Observe the smooth collapse animation when losing focus</li>
                </ol>
            </div>
        </RCard>

        <RAlert Title="Implementation Complete" 
                Text="The RAppShell search has been successfully reworked with RAutosuggest integration and smooth animations using utility-first CSS." 
                Icon="check_circle" 
                Variant="AlertVariant.Filled" />
    </div>
</RAppShell>

@code {
    private AppUser currentUser = new AppUser
    {
        Name = "Test User",
        Email = "test@example.com",
        Avatar = "",
        Role = "Developer",
        IsOnline = true
    };

    private List<AppNavItem> navigationItems = new List<AppNavItem>
    {
        new AppNavItem
        {
            Text = "Dashboard",
            Href = "/test/app-shell-search",
            Icon = "dashboard",
            IsHighlighted = true
        },
        new AppNavItem
        {
            Text = "Search Test",
            Href = "/test/app-shell-search",
            Icon = "search"
        },
        new AppNavItem
        {
            Text = "Components",
            Href = "#",
            Icon = "widgets"
        },
        new AppNavItem
        {
            Text = "Settings",
            Href = "#",
            Icon = "settings"
        }
    };

    private AppShellFeatures GetTestFeatures()
    {
        return AppShellFeatures.Header | 
               AppShellFeatures.Search | 
               AppShellFeatures.Sidebar | 
               AppShellFeatures.SidebarToggle | 
               AppShellFeatures.ThemeToggle | 
               AppShellFeatures.UserMenu;
    }
}