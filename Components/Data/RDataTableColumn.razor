@* RDataTableColumn - Column definition for RDataTable *@
@typeparam TItem
@implements IDisposable

@code {
    [Parameter] public string Key { get; set; } = "";
    [Parameter] public string Header { get; set; } = "";
    [Parameter] public bool Sortable { get; set; }
    [Parameter] public RenderFragment<TItem> CellTemplate { get; set; }
    [Parameter] public RenderFragment HeaderTemplate { get; set; }
    [Parameter] public string Width { get; set; }
    [Parameter] public string MinWidth { get; set; }
    [Parameter] public string MaxWidth { get; set; }
    [Parameter] public string CellClass { get; set; } = "";
    [Parameter] public string HeaderClass { get; set; } = "";
    
    [CascadingParameter] public RDataTable<TItem> Parent { get; set; }
    
    protected override void OnInitialized()
    {
        if (Parent != null)
        {
            var column = new RDataTable<TItem>.RDataTableColumn<TItem>
            {
                Key = Key,
                Header = Header,
                Sortable = Sortable,
                CellTemplate = CellTemplate,
                HeaderTemplate = HeaderTemplate,
                Width = Width,
                MinWidth = MinWidth,
                MaxWidth = MaxWidth,
                CellClass = CellClass,
                HeaderClass = HeaderClass
            };
            Parent.AddColumn(column);
        }
    }
    
    public void Dispose()
    {
        // Column cleanup handled by parent
    }
}