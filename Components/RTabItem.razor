@using RR.Blazor.Enums
@* RTabItem - Individual tab item for RTabs component *@
@implements IDisposable

@code {
    [CascadingParameter] public RTabs Parent { get; set; }
    
    /// <summary>Unique identifier for this tab</summary>
    [Parameter] public string Id { get; set; } = Guid.NewGuid().ToString();
    
    /// <summary>Tab text/title</summary>
    [Parameter] public string Text { get; set; }
    
    /// <summary>Icon for tab</summary>
    [Parameter] public string Icon { get; set; }
    
    /// <summary>Icon position</summary>
    [Parameter] public IconPosition IconPosition { get; set; } = IconPosition.Start;
    
    /// <summary>Whether tab is disabled</summary>
    [Parameter] public bool Disabled { get; set; }
    
    /// <summary>Whether tab can be closed</summary>
    [Parameter] public bool Closable { get; set; }
    
    /// <summary>Badge count to display</summary>
    [Parameter] public int BadgeCount { get; set; }
    
    /// <summary>Badge variant (danger, warning, success)</summary>
    [Parameter] public string BadgeVariant { get; set; }
    
    /// <summary>Tab content</summary>
    [Parameter] public RenderFragment ChildContent { get; set; }
    
    protected override void OnInitialized()
    {
        if (Parent == null)
        {
            throw new InvalidOperationException("RTabItem must be used within RTabs component");
        }
        
        Parent.AddTab(new RTabs.RTabItemInfo
        {
            Id = Id,
            Text = Text,
            Icon = Icon,
            IconPosition = IconPosition,
            IsDisabled = Disabled,
            IsClosable = Closable,
            BadgeCount = BadgeCount,
            BadgeVariant = BadgeVariant,
            Content = ChildContent
        });
    }
    
    public void Dispose()
    {
        Parent?.RemoveTab(Id);
    }
}

@* 
Usage Examples:

<!-- Basic tab -->
<RTabItem Id="home" Text="Home" Icon="home">
    <div>Home content here...</div>
</RTabItem>

<!-- Tab with badge -->
<RTabItem Id="notifications" Text="Notifications" Icon="notifications" BadgeCount="5" BadgeVariant="danger">
    <div>Notifications content here...</div>
</RTabItem>

<!-- Closable tab -->
<RTabItem Id="document" Text="Document" Icon="description" IsClosable="true">
    <div>Document content here...</div>
</RTabItem>

<!-- Disabled tab -->
<RTabItem Id="disabled" Text="Disabled" Icon="block" Disabled="true">
    <div>This tab is disabled</div>
</RTabItem>

<!-- Tab with end icon -->
<RTabItem Id="settings" Text="Settings" Icon="arrow_forward" IconPosition="IconPosition.End">
    <div>Settings content here...</div>
</RTabItem>
*@