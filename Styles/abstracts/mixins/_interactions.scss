@use '../variables' as *;

// ============================================================================
// INTERACTION MIXINS - Hover, Focus, Loading, Animations
// ============================================================================

// Interactive pattern mixin with filter support
@mixin layout-interactive($hover-transform: translateY(-1px), $active-transform: translateY(0) scale(0.98), $hover-filter: brightness(1.02)) {
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
  
  &:hover:not(:disabled) {
    transform: $hover-transform;
    @if $hover-filter {
      filter: $hover-filter;
    }
  }
  
  &:active:not(:disabled) {
    transform: $active-transform;
  }
  
  &:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }
  
  &:disabled {
    opacity: var(--opacity-disabled);
    cursor: not-allowed;
    pointer-events: none;
    transform: none !important;
  }
}

// Focus ring generation
@mixin focus-ring($color: var(--color-focus), $width: 2px, $offset: 2px) {
  &:focus-visible {
    outline: #{$width} solid color-mix(in srgb, #{$color} 40%, transparent);
    outline-offset: #{$offset};
  }
}

// Hover lift effect with filter enhancement
@mixin hover-lift($distance: -2px, $filter: brightness(1.02)) {
  transition: var(--transition-fast);
  
  &:hover {
    transform: translateY(#{$distance});
    filter: $filter;
  }
}

// Card hover effect with filter enhancement
@mixin card-hover($filter: brightness(1.02) saturate(1.05)) {
  box-shadow: var(--shadow-lg);
  transform: translateY(-0.125rem);
  filter: $filter;
}

// Button hover effect with filter enhancement
@mixin button-hover($distance: 0.125rem, $filter: brightness(0.95) saturate(1.05)) {
  transition: var(--transition-transform);
  
  &:hover {
    transform: translateY(-#{$distance});
    filter: $filter;
  }
}

// Generic hover animation
@mixin hover-animation($property: transform, $value: translateY(-0.125rem)) {
  transition: $property 0.2s ease-in-out;
  
  &:hover {
    #{$property}: $value;
  }
}

// Loading skeleton animation
@mixin loading-skeleton {
  background: linear-gradient(90deg, var(--color-surface-elevated), var(--color-surface-pressed), var(--color-surface-elevated));
  background-size: 200% 100%;
  animation: loadingShimmer 1.5s ease-in-out infinite;
}

// Loading spinner
@mixin loading-spinner($size: 1.25rem, $color: var(--color-primary)) {
  width: $size;
  height: $size;
  border: var(--border-2) solid transparent;
  border-top: var(--space-0-5) solid $color;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

// Enhanced transform-interaction mixin - Agent 3 architecture pattern
@mixin transform-interaction($hover-transform: scale(1.01), $active-transform: scale(0.99), $hover-shadow: var(--theme-shadow-lg), $active-shadow: var(--theme-shadow-sm), $hover-bg: null, $active-bg: null) {
  & {
    transition: all var(--duration-normal) var(--ease-out);
  }
  
  &:hover {
    transform: $hover-transform;
    box-shadow: $hover-shadow;
    @if $hover-bg {
      background: $hover-bg !important;
      color: var(--color-text-inverse) !important;
    }
  }
  
  &:active {
    transform: $active-transform;
    box-shadow: $active-shadow;
    @if $active-bg {
      background: $active-bg !important;
      color: var(--color-text-inverse) !important;
    }
  }
}

// Interactive states system with filter support
@mixin interactive-states($primary-color: var(--color-primary), $hover-color: var(--color-primary-hover), $active-color: var(--color-primary-active), $hover-filter: brightness(1.05) saturate(1.1)) {
  transition: all var(--duration-normal) var(--ease-out);
  
  &:hover {
    background: $hover-color;
    transform: translateY(-1px);
    box-shadow: var(--theme-shadow-lg);
    filter: $hover-filter;
  }
  
  &:active {
    background: $active-color;
    transform: translateY(0);
    box-shadow: var(--theme-shadow-sm);
  }
  
  &:focus-visible {
    outline: 2px solid $primary-color;
    outline-offset: 2px;
  }
}

// Unified button variant with interaction states
@mixin button-variant-with-states($base-color, $text-color: var(--color-text-inverse), $hover-color: null, $active-color: null) {
  background: var(--color-#{$base-color});
  color: $text-color;
  box-shadow: var(--theme-shadow-md);
  
  $hover: if($hover-color, $hover-color, var(--color-#{$base-color}-dark));
  $active: if($active-color, $active-color, var(--color-#{$base-color}-darker));
  
  @include transform-interaction(
    scale(1.01),
    scale(0.99),
    var(--theme-shadow-lg),
    var(--theme-shadow-sm),
    $hover,
    $active
  );
}

// Status variant for different states
@mixin status-variant($color-base) {
  background: var(--color-#{$color-base}-light);
  color: var(--color-#{$color-base}-dark);
  border-color: var(--color-#{$color-base});
  
  & i {
    color: var(--color-#{$color-base});
  }
}